
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.sng {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.def {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
  <script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.min.js"></script>
  <title>A Report Generated by knitr</title>
</head>
<body>

  <p>This report is automatically generated with the R
    package <a href="https://yihui.org/knitr/"><strong>knitr</strong></a>
    (version <code class="knitr inline">1.50</code>)
    .</p>

<div class="chunk" id="auto-report"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl def">(dplyr)</span>
<span class="hl kwd">library</span><span class="hl def">(readr)</span>
<span class="hl kwd">library</span><span class="hl def">(ggplot2)</span>

<span class="hl def">data</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read_csv</span><span class="hl def">(</span><span class="hl sng">&quot;D:/Python/Portfolio Projects/Kidney Stones and Simpson's Paradox/kidney_stone_data.csv&quot;</span><span class="hl def">)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Rows: 700 Columns: 3
## ── Column specification ──────────────────────────────────────────────────────────────────
## Delimiter: ","
## chr (2): treatment, stone_size
## dbl (1): success
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">head</span><span class="hl def">(data)</span>
</pre></div>
<div class="output"><pre class="knitr r">## # A tibble: 6 × 3
##   treatment stone_size success
##   &lt;chr&gt;     &lt;chr&gt;        &lt;dbl&gt;
## 1 B         large            1
## 2 A         large            1
## 3 A         large            0
## 4 A         large            1
## 5 A         large            1
## 6 B         large            1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">summary</span><span class="hl def">(data)</span>
</pre></div>
<div class="output"><pre class="knitr r">##   treatment          stone_size           success      
##  Length:700         Length:700         Min.   :0.0000  
##  Class :character   Class :character   1st Qu.:1.0000  
##  Mode  :character   Mode  :character   Median :1.0000  
##                                        Mean   :0.8029  
##                                        3rd Qu.:1.0000  
##                                        Max.   :1.0000
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Calculate the number and frequency of success and failure of each treatment </span>
<span class="hl def">data</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">group_by</span><span class="hl def">(treatment,success)</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">summarise</span><span class="hl def">(</span><span class="hl kwc">N</span><span class="hl def">=</span><span class="hl kwd">n</span><span class="hl def">())</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">mutate</span><span class="hl def">(</span><span class="hl kwc">Freq</span><span class="hl def">=</span><span class="hl kwd">round</span><span class="hl def">(N</span><span class="hl opt">/</span><span class="hl kwd">sum</span><span class="hl def">(N),</span><span class="hl num">2</span><span class="hl def">))</span>
</pre></div>
<div class="message"><pre class="knitr r">## `summarise()` has grouped output by 'treatment'. You can override using the `.groups`
## argument.
</pre></div>
<div class="output"><pre class="knitr r">## # A tibble: 4 × 4
## # Groups:   treatment [2]
##   treatment success     N  Freq
##   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
## 1 A               0    77  0.22
## 2 A               1   273  0.78
## 3 B               0    61  0.17
## 4 B               1   289  0.83
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Calculate number and frequency of success and failure by stone size for each treatment</span>
<span class="hl def">sum_data</span> <span class="hl kwb">&lt;-</span> <span class="hl def">data</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">group_by</span><span class="hl def">(treatment,stone_size,success)</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">summarise</span><span class="hl def">(</span><span class="hl kwc">N</span><span class="hl def">=</span><span class="hl kwd">n</span><span class="hl def">())</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">mutate</span><span class="hl def">(</span><span class="hl kwc">Freq</span><span class="hl def">=</span><span class="hl kwd">round</span><span class="hl def">(N</span><span class="hl opt">/</span><span class="hl kwd">sum</span><span class="hl def">(N),</span><span class="hl num">2</span><span class="hl def">))</span>
</pre></div>
<div class="message"><pre class="knitr r">## `summarise()` has grouped output by 'treatment', 'stone_size'. You can override using the
## `.groups` argument.
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl def">sum_data</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">ggplot</span><span class="hl def">(</span><span class="hl kwd">aes</span><span class="hl def">(</span><span class="hl kwc">x</span><span class="hl def">=treatment,</span><span class="hl kwc">y</span><span class="hl def">=N))</span> <span class="hl opt">+</span> <span class="hl kwd">geom_bar</span><span class="hl def">(</span><span class="hl kwd">aes</span><span class="hl def">(</span><span class="hl kwc">fill</span><span class="hl def">=stone_size),</span><span class="hl kwc">stat</span><span class="hl def">=</span><span class="hl sng">'identity'</span><span class="hl def">)</span>
</pre></div>
</div><div class="rimage center"><img src="figure/EDA-Rhtmlauto-report-1.png" alt="plot of chunk auto-report" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">#finding confounding variable</span>
<span class="hl kwd">library</span><span class="hl def">(broom)</span>
<span class="hl def">test_res</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">chisq.test</span><span class="hl def">(data</span><span class="hl opt">$</span><span class="hl def">treatment,data</span><span class="hl opt">$</span><span class="hl def">stone_size)</span>
<span class="hl kwd">tidy</span><span class="hl def">(test_res)</span>
</pre></div>
<div class="output"><pre class="knitr r">## # A tibble: 1 × 4
##   statistic  p.value parameter method                                                     
##       &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;                                                      
## 1      189. 4.40e-43         1 Pearson's Chi-squared test with Yates' continuity correcti…
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl def">knitr</span><span class="hl opt">::</span><span class="hl kwd">stitch_rhtml</span><span class="hl def">(</span><span class="hl sng">'17.r'</span><span class="hl def">)</span>
</pre></div>
<div class="warning"><pre class="knitr r">## Warning in file(con, "r"): cannot open file '17.r': No such file or directory
</pre></div>
<div class="error"><pre class="knitr r">## Error in file(con, "r"): cannot open the connection
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">dev.off</span><span class="hl def">()</span> <span class="hl com"># clear plots</span>
</pre></div>
<div class="output"><pre class="knitr r">## RStudioGD 
##         2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">detach</span><span class="hl def">(</span><span class="hl sng">&quot;package:tidyverse&quot;</span><span class="hl def">,</span><span class="hl kwc">unload</span><span class="hl def">=</span><span class="hl num">TRUE</span><span class="hl def">)</span> <span class="hl com">#clear packages</span>
</pre></div>
<div class="error"><pre class="knitr r">## Error in detach("package:tidyverse", unload = TRUE): invalid 'name' argument
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">cat</span><span class="hl def">(</span><span class="hl sng">&quot;\014&quot;</span><span class="hl def">)</span> <span class="hl com">#ctrl+L</span>
</pre></div>
</div></div>

  <p>The R session information (including the OS info, R version and all
    packages used):</p>

<div class="chunk" id="session-info"><div class="rcode"><div class="source"><pre class="knitr r">    <span class="hl kwd">sessionInfo</span><span class="hl def">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 4.4.3 (2025-02-28 ucrt)
## Platform: x86_64-w64-mingw32/x64
## Running under: Windows 11 x64 (build 26100)
## 
## Matrix products: default
## 
## 
## locale:
## [1] LC_COLLATE=English_India.utf8  LC_CTYPE=English_India.utf8   
## [3] LC_MONETARY=English_India.utf8 LC_NUMERIC=C                  
## [5] LC_TIME=English_India.utf8    
## 
## time zone: Asia/Calcutta
## tzcode source: internal
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] broom_1.0.7   ggplot2_3.5.1 readr_2.1.5   dplyr_1.1.4  
## 
## loaded via a namespace (and not attached):
##  [1] crayon_1.5.3      vctrs_0.6.5       knitr_1.50        cli_3.6.4        
##  [5] xfun_0.51         rlang_1.1.5       highr_0.11        purrr_1.0.4      
##  [9] generics_0.1.3    labeling_0.4.3    glue_1.8.0        bit_4.6.0        
## [13] backports_1.5.0   colorspace_2.1-1  hms_1.1.3         scales_1.3.0     
## [17] grid_4.4.3        evaluate_1.0.3    munsell_0.5.1     tibble_3.2.1     
## [21] tzdb_0.5.0        lifecycle_1.0.4   compiler_4.4.3    pkgconfig_2.0.3  
## [25] tidyr_1.3.1       rstudioapi_0.17.1 farver_2.1.2      R6_2.6.1         
## [29] tidyselect_1.2.1  utf8_1.2.4        vroom_1.6.5       pillar_1.10.1    
## [33] parallel_4.4.3    magrittr_2.0.3    tools_4.4.3       withr_3.0.2      
## [37] bit64_4.6.0-1     gtable_0.3.6
</pre></div>
<div class="source"><pre class="knitr r">    <span class="hl kwd">Sys.time</span><span class="hl def">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "2025-04-01 14:11:06 IST"
</pre></div>
</div></div>


</body>
</html>
